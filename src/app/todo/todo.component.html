<body>
  <header>
    <h1 class="titulo">TODO APP</h1>
  </header>
  <br>
  <button><a routerLink="/categoria">Cadastrar categorias</a></button>
  <br>
  <br>
  <h1 class="titulo2">Tarefas</h1>
  <div id="linhaDeAdicionarCategorias">
    <input maxLength="15" placeholder="Nome da tarefa" [(ngModel)]="tarefa.nome">
    <select name="" id="" [(ngModel)]="tarefa.categoria">
      <option *ngFor="let categoria of categorias" [value]="categoria.nome">{{ categoria.nome }}</option>
    </select>
    <button (click)="adicionarTarefa()" [disabled]="!hasPermission('Add')">Cadastrar</button>
  </div>

  <div class="tarefasAdicionadas">
    <div *ngFor="let cate of categorias" (dragover)="allowDrop(cate.nome, $event)" (drop)="drop($event)">
      <h1 style="display:flex;justify-content:center">{{ cate.nome }}</h1>
      <div *ngFor="let trf of tarefas; index as index">
        <div class="tarefa" *ngIf="trf.categoria === cate.nome">
          
          <div draggable="true" (dragstart)="drag(trf)" (drop)="dropEvent($event, index)">
            <h3>
              Nome da tarefa: {{ trf.nome }}
              <br>
            </h3>
            <div style="display:flex; justify-content:center;">
              <button (click)="editarTarefa()" [disabled]="!hasPermission('Edit')">Editar</button>
              <button (click)="removerTarefa(trf.id)" [disabled]="!hasPermission('Remove')">Remover</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
